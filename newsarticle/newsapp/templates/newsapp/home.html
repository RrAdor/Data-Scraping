{% extends 'base.html' %}

{% block content %}
<h1>News Portal Scraper</h1>

<form method="post" action="{% url 'scrape_portal' %}">
    {% csrf_token %}
    <input type="url" name="url" placeholder="Enter news portal URL" required>
    <button type="submit">Scrape Headlines</button>
</form>

<h2>Recent Headlines</h2>
<ul>
    {% for headline in recent_headlines %}
    <li>
        <a href="{% url 'article' %}?url={{ headline.url|urlencode }}">
            {{ headline.headline }}
        </a> ({{ headline.url|truncatechars:30 }})
    </li>
    {% empty %}
    <li>No headlines found. Scrape a news portal first.</li>
    {% endfor %}
</ul>

<h2>Available Portals</h2>
<ul>
    {% for portal in portals %}
    <li><a href="{% url 'headlines' portal=portal %}">{{ portal }}</a></li>
    {% empty %}
    <li>No portals scraped yet</li>
    {% endfor %}
</ul>
{% endblock %}